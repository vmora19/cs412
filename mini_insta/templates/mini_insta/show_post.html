<!-- Author: Valentina Mora (vmora19@bu.edu), 09/30/2025 -->
<!-- Description: HTML page to be used as for showing single post -->

<!-- mini_insta/templates/mini_insta/show_post.html -->
{% extends 'mini_insta/base.html' %}
<!-- this displays a single Post. -->

{% block content %}
    <div id="post-content">
        {% for photo in post.get_all_photos %}
            {% if photo.get_image_url %}
                <img src="{{ photo.get_image_url }}">
            {% endif %}
        {% endfor %}  
        <div id="post-caption">
            <p>{{post.caption}} at {{post.timestamp}}</p>
        </div>

        <div id="likes">
            {% if post.get_first_like %}
                <p>Liked by
                    <strong>{{post.get_first_like.profile.username}}</strong> 
                    and {{post.get_num_likes}} others.
                </p>
            {% else %}
                <p>No likes.</p>
            {% endif %}
        </div>

        <div id="comments">
            {% for comment in post.get_all_comments %}
                <p><strong>{{comment.profile.username}}</strong> {{comment}}</p>
            {% endfor %}
        </div>
        
        {% if request.user.is_authenticated and request.user == post.profile.user %}
        <div id="post-options">
            <div id = "post-delete">
                <h3><a href="{% url 'delete_post' post.pk %}">Delete</a></h3>
            </div>
            <div id="post-update">
                <h3><a href="{% url 'update_post' post.pk %}">Update</a></h3>
            </div>
        </div>
        {% endif %}
        
    </div>
    


{% endblock %}